#vizs {
	margin: 1rem 0;
	width: 100%;
	position: relative;
}

#vizs .viz {
	height: 100%;
	width: 100%;
	position: absolute;
	.transition(transform, 0.5s);
	.box-sizing(border-box);
}

#viz.selected-graph #vizs .viz {

	/* Android browser hack: without forcing hardware acceleration, the fixed-positio bar will disappear on transition end. */
	-webkit-transform-style: preserve-3d;
}

#viz-map {
	.translate-x(0);
}

#viz-graph {

	/* Hide the map bleeding under this layer on small screens with a white background. */
	background-color: white;
	.translate-x(100%);
}

#viz.selected-graph #viz-graph {
	.translate-x(0);
}

#viz.selected-graph #viz-map {
	.translate-x(-100%);
}

#viz-map-svg {
	display: block;
	margin: 0 auto;
	margin-top: 0;
	-webkit-transition-property: margin-top, -webkit-transform;
	-moz-transition-property: margin-top, -moz-transform;
	-ms-transition-property: margin-top, -ms-tranform;
	-o-transition-property: margin-top, -o-transform;
	transition-property: transform;
	.transition-duration(0.25s);
}

#viz-map-svg .canton {
	cursor: pointer;
	stroke: white;
	stroke-width: 1;
}

#viz-map-tip {
	width: 14rem;
	position: absolute;
	bottom: 1em;
	left: 2em;
	background-color: #d2d3cd;
	padding: 0.6em 1em;
	.transition(transform, 0.25s);
}

.close {
	cursor: pointer;
}

#viz-map-tip .close:before,
#viz-graph-box .close:before {
	content: '×';
	color: #6a7840;
	background-color: white;
	display: block;
	width: 1.4rem;
	height: 1.4rem;
	border-radius: 1.4rem;
	font-size: 0.8rem;
	line-height: 1.4rem;
	text-align: center;
	position: absolute;
	top: -0.8em;
	left: -0.8em;
	line-height: 0;
	padding-top: 0.9em;
	box-sizing: border-box;
	.box-shadow(0 0 3px 2px #999);
	.box-sizing(border-box);
}

#viz-map-tip .title {
	font-size: 1.2em;
	text-align: center;
	margin: 0;
}

#viz-map-tip dl {
	font-family: @serif;
	font-size: 0.9rem;
	margin: 0.2em 0 0 0;
}

#viz-map-tip .title,
#viz-map-tip dd {
	color: #6a7840;
}

#viz-map-tip dt {
	display: inline-block;
	width: 65%;
	margin: 0.5em 5% 0 0;
	color: #6e6e6e;
	vertical-align: middle;
}

#viz-map-tip p {
	font-style: italic;
	font-size: 0.9em;
	color: #6e6e6e;
}

#viz-map-tip dd {
	font-weight: bold;
	font-size: 1.2em;
	margin: 0;
	display: inline-block;
	width: 30%;
	text-align: left;
}

#viz-map-tip dd:first-of-type {
	font-size: 1.6em;
	color: black;
}

#viz-map-legend {
	position: absolute;
	right: 2rem;
	width: 16rem;
}

#viz-map-legend > p {
	text-align: right;
	text-transform: uppercase;
	font-weight: bold;
}

#viz-map-legend > ul {
	width: 6rem;
	list-style: none;
	margin: 0;
	padding: 0;
	float: right;
}

#viz-map-legend > ul > li {
	border-left-style: solid;
	border-left-width: 1em;
	padding-left: 1em;
	margin-bottom: 0.2em;
	font-family: @serif;
	font-size: 0.9rem;
	font-style: italic;
}

#viz-graph-menu .nav-item {
	display: inline-block;
	color: white;
	font-size: 0.7rem;
	background-color: #d0d1d0;
	padding: 0.2em 0.6em;
	min-width: 10rem;
	.box-sizing(border-box);
}

#viz.general-selected .nav-item.general,
#viz.canton-selected .nav-item.canton {
	background-color: @brandBackground;
}

#viz-graph-general,
#viz-graph-canton {
	position: absolute;
	width: 100%;
	left: 0;
	opacity: 0;
	pointer-events: none;
	.transition(opacity, 0.25s);
	.box-sizing(border-box);
}

#viz.general-selected #viz-graph-general,
#viz.canton-selected #viz-graph-canton {
	opacity: 1;
	pointer-events: auto;
}

#viz-graph-select {
	font-family: @serif;
	font-size: 0.7rem;
	margin: 0.6rem 0 0 0;
	width: 10rem;
	height: 1rem;
	display: inline-block;
	.box-sizing(border-box);
}

#viz.selected-map .nav-item.map,
#viz.selected-graph .nav-item.graph {
	color: inherit;
}

#viz.selected-map #viz-graph-blurb,
#viz.selected-graph #viz-map-blurb,
#viz.selected-map #viz-graph-blurb-canton,
#viz.selected-graph.canton-selected #viz-graph-blurb,
#viz.selected-graph.general-selected #viz-graph-blurb-canton {
	opacity: 0;
	height: 0;
	visibility: hidden;
	margin: 0;
}

#viz.module.selected-map .nav,
#viz.module.selected-map h3 {
	position: relative;
	z-index: 1;
}

#viz .blurb {
	opacity: 1;
	.transition(opacity, 0.5s);
}

#viz-map-blurb {

	/* If the bottom of the map bleeds downwards, let it bleed under the blurb instead of over it. */
	position: relative;
	background: rgba(255, 255, 255, 0.6);
}

#viz-graph-general-table {
	table-layout: fixed;
	border-collapse: separate;
	border-spacing: 1px 2rem;
	padding: 2rem;
	width: 100%;
	.box-sizing(border-box);
}

#viz-graph-general-table td {
	.box-sizing(border-box);
}

#viz-graph-general-table td.category {
	width: 19%;
	padding-right: 1rem;
	font-family: @serif;
	font-size: 1rem;
	color: #636363;
}

#viz-graph-general-table td.category > div {
	height: 3rem;
}

#viz-graph-general-table td.canton {
	width: 1%;
	background-color: #d2d2d2;
	cursor: pointer;
}

#viz-graph-general-table td.canton:hover,
#viz-graph-general-table td.canton.selected {
	background-color: @brandBackground;
}

#viz-graph-general-table tr:first-of-type td.canton > span {
	position: relative;
}

#viz-graph-general-table tr:first-of-type td.canton > span:after {
	position: absolute;
	top: 2.35rem;
	left: 4px;
	content: '';
	display: inline-block;
	width: 1px;
	height: 1px;
	background-color: #636363;
}

#viz-graph-general-table tr:first-of-type td.canton:nth-of-type(odd) > span:after {

	/* Leave alternating space. */
	background: none;
}

#viz-graph-general-table tr:first-of-type td.canton.first > span:after,
#viz-graph-general-table tr:first-of-type td.canton.last > span:after {
	font-family: @serif;
	color: #636363;
	font-size: 0.9rem;
	background: none;
	top: 2.4rem;
	line-height: 0;
}

#viz-graph-general-table tr:first-of-type td.canton.first > span:after {

	/* Ideally we'd use the small black right-pointing triangle, but Android doesn't support it. */
	content: '1° ▶';
	font-weight: bold;
	color: black;
	white-space: nowrap;
	left: -0.6rem;
}

#viz-graph-general-table tr:first-of-type td.canton.last > span:after {
	content: attr(data-position);
	left: -4px;
}

#viz-graph-general-table td > span {
	height: 0;
	width: 0;
	display: block;
	color: transparent;
}

#viz-graph-box {
	position: absolute;
	top: -8rem;
	left: -14rem;
	background-color: #d3d4ce;
	padding: 1rem;
	width: 14rem;
}

#viz-graph-box:after {
	width: 0;
	height: 0;
	content: '';
	display: block;
	border-style: solid;
	border-width: 20px 5px 0 5px;
	border-color: #d3d4ce transparent transparent transparent;
	position: absolute;
	bottom: -20px;
	right: 1.4rem;
}

#viz-graph-box .title {
	color: @brandBackground;
	text-transform: uppercase;
	font-weight: bold;
	display: inline-block;
	width: 50%;
	vertical-align: top;
}

#viz-graph-box .ranking {
	color: #636363;
	font-family: @serif;
	font-size: 0.8rem;
	display: inline-block;
	width: 30%;
	margin-right: 5%;
}

#viz-graph-box .position {
	color: black;
	font-weight: bold;
	font-size: 1.4rem;
}

#viz-graph-canton {
	height: 100%;
	width: 100%;
	text-align: center;
}

#viz-graph-canton .stat {
	width: 14%;
	margin: 1rem 2%;
	display: inline-block;
	vertical-align: top;
}

#viz-graph-canton .stat p {
	font-family: @serif;
	color: #7d7d7d;
	font-size: 0.9rem;
	text-align: left;
}

#viz-graph-canton .tube {
	height: 18rem;
	width: 2rem;
	margin: 0 auto;
	background-color: #d2d2d2;
	position: relative;
}

#viz-graph-canton .mercury {
	height: 0;
	width: 2rem;
	position: absolute;
	bottom: 0;
	border-style: none solid;
	border-color: #d2d2d2;
	border-width: 2px;
	background-color: @brandBackground;
	.box-sizing(border-box);
	.transition(height, 0.25s);
}

#viz-graph-canton .median {
	height: 1px;
	border-bottom: 1px dotted #333;
	left: -30%;
	position: absolute;
	width: 150%;
	z-index: 1;
}

#viz-graph-canton .median:before {
	content: attr(data-median);
	position: absolute;
	left: -4rem;
	font-size: 0.8rem;
	font-family: @serif;
	top: -0.5em;
	width: 4rem;
}

#viz-graph-canton .mercury:after {
	content: attr(data-percentage);
	color: @brandBackground;
	font-family: @serif;
	font-weight: bold;
	font-size: 1.2rem;
	margin-left: 2.4rem;
	margin-top: -0.5em;
	display: block;
}
